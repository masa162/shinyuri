# 新百合ヶ丘情報サイト仕様書 v1.0

## 1. プロジェクト概要

### サイトコンセプト
動的なコミュニティWEBページとして、住民が自由に情報投稿できる新百合ヶ丘周辺エリアの総合ポータルサイト

### コア理念
- **「コンテンツを作らない」** - 運営側はコンテンツ作成せず、住民投稿がメインコンテンツ
- **住民による住民のための情報発信**
- **スマホファースト設計** - UI/UXの最適化がすべて

## 2. ターゲットユーザー

### プライマリーターゲット
- **Aさん（30歳・ママ）**: 子育て中、地域情報の共有・閲覧
- **Bさん（45歳・地元カフェ経営）**: 店舗PR、イベント告知、集客
- **Cさん（15歳・地元高校生女子）**: 地元カフェ紹介、トレンド情報

### 共通ニーズ
- いいね機能
- スマホ最適化された投稿・閲覧
- ページ内記事投稿・画像投稿
- 各SNSへの拡散連携ボタン

## 3. 核心機能：動的ユーザー投稿フォーム

### フロントエンド投稿フォーム仕様

#### 必須入力項目
- **記事本文**（テキストエリア）
  - 最大文字数: 2,000文字
  - 改行対応
  - 絵文字入力対応

#### 任意入力項目
- **記事タイトル**（テキスト入力）
  - 最大文字数: 100文字
  - 未入力時は本文冒頭20文字を自動タイトル化
  
- **掲載写真**（ファイルアップロード）
  - 対応形式: JPG, PNG, GIF
  - 最大ファイルサイズ: 5MB
  - 最大投稿枚数: 5枚
  - 自動リサイズ機能（横幅最大800px）
  
- **投稿者名**（テキスト入力）
  - 最大文字数: 50文字
  - 未入力時は「匿名」表示

### バックエンド管理設定項目

#### 掲載期間設定
- **無期限**（デフォルト）
- **期間指定**
  - 開始日時設定
  - 終了日時設定
  - 期間終了後は自動非表示

#### コメント機能設定
- **コメント可**（デフォルト）
  - 投稿に対するコメント投稿可能
  - コメント者名（任意）
  - いいね機能付き
- **コメント不可**
  - コメント投稿フォーム非表示

## 4. UI/UX設計仕様

### デザイン原則
- **スマホファースト**徹底
- **情報密度の最大化**
- **直感的操作性**
- **高速レスポンス**

### レスポンシブデザイン
- **モバイル**: 320px-768px（メイン設計）
- **タブレット**: 769px-1024px
- **デスクトップ**: 1025px以上

### 投稿表示仕様
- **カード型レイアウト**
- **画像優先表示**（投稿に画像がある場合）
- **タイムライン形式**（新着順）
- **無限スクロール**対応

### インタラクション機能
- **いいね機能**
  - リアルタイム反映
  - 重複防止（IP/セッション単位）
  - いいね数表示
- **SNS連携ボタン**
  - Twitter（X）
  - Instagram
  - Facebook
  - LINE
- **コメント機能**
  - 折りたたみ表示
  - 返信機能

## 5. 技術仕様・アーキテクチャ

### フロントエンド
- **フレームワーク**: Next.js 14+
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **状態管理**: Zustand
- **UI コンポーネント**: Radix UI + shadcn/ui

### バックエンド
- **BaaS**: Supabase
- **データベース**: PostgreSQL
- **認証**: Supabase Auth（匿名投稿対応）
- **ストレージ**: Supabase Storage（画像ファイル）
- **リアルタイム**: Supabase Realtime（いいね・コメント）

### ホスティング・デプロイ
- **ホスティング**: Vercel
- **CDN**: Vercel Edge Network
- **ドメイン**: 独自ドメイン設定予定
- **SSL**: 自動証明書

### 開発・運用
- **バージョン管理**: GitHub
- **CI/CD**: Vercel + GitHub Actions
- **モニタリング**: Vercel Analytics + Sentry
- **SEO**: Next.js 14 App Router + Metadata API

## 6. データベース設計

### テーブル構成

#### posts（投稿）
```sql
- id: UUID (Primary Key)
- title: VARCHAR(100) (nullable)
- content: TEXT (required)
- author_name: VARCHAR(50) (nullable)
- images: JSON[] (nullable)
- likes_count: INTEGER (default: 0)
- comments_enabled: BOOLEAN (default: true)
- published_at: TIMESTAMP (default: now())
- expires_at: TIMESTAMP (nullable)
- created_at: TIMESTAMP
- updated_at: TIMESTAMP
```

#### comments（コメント）
```sql
- id: UUID (Primary Key)
- post_id: UUID (Foreign Key)
- content: TEXT (required)
- author_name: VARCHAR(50) (nullable)
- likes_count: INTEGER (default: 0)
- created_at: TIMESTAMP
```

#### likes（いいね）
```sql
- id: UUID (Primary Key)
- post_id: UUID (Foreign Key, nullable)
- comment_id: UUID (Foreign Key, nullable)
- user_ip: VARCHAR(45) (IP address based identification)
- created_at: TIMESTAMP
```

## 7. セキュリティ仕様

### 投稿制限
- **レート制限**: IP単位で1時間あたり10投稿まで
- **スパム対策**: 同一内容の連続投稿防止
- **不適切コンテンツ**: 管理者による手動削除機能

### データ保護
- **個人情報**: 最小限の収集（IP アドレスのみ）
- **画像処理**: EXIF データ自動削除
- **HTTPS**: 全通信暗号化

## 8. 収益化モデル

### 主要収益源
- **地域事業者コラボ記事**: 運営側による取材・記事作成（都度課金）
- **PR枠リンク設置**: サイト内有料広告枠
- **地域事業者出稿**: 月額固定料金制

### 収益化方針
- **アフィリエイト・外部広告に依存しない**
- **地域密着型の直接取引**
- **コミュニティ価値の最大化**

## 9. 開発フェーズ

### Phase 1: MVP開発（2-3週間）
- 基本投稿機能
- 画像アップロード
- いいね機能
- レスポンシブデザイン

### Phase 2: 機能拡張（2-3週間）
- コメント機能
- SNS連携
- 管理者機能
- SEO最適化

### Phase 3: 運用最適化（継続）
- パフォーマンス改善
- ユーザビリティ向上
- 収益化機能実装

## 10. 成功指標（KPI）

### 技術指標
- **ページ表示速度**: 3秒以内
- **モバイル利用率**: 80%以上
- **投稿完了率**: 90%以上

### ユーザー指標
- **月間投稿数**: 100投稿以上
- **月間アクティブユーザー**: 1,000人以上
- **平均セッション時間**: 3分以上

### ビジネス指標
- **地域事業者からの問い合わせ**: 月5件以上
- **収益化達成**: 6ヶ月以内

---

**更新履歴**
- v1.0 (2025/08/01): 初版作成